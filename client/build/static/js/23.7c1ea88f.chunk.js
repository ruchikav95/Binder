(this["webpackJsonpapp-frontend"]=this["webpackJsonpapp-frontend"]||[]).push([[23],{1047:function(e,t,n){"use strict";n.r(t);var r=n(6),o=n(7),a=n(16),i=n(15),c=n(17),s=n(0),l=n.n(s),u=n(53),f=n(719),m=n(707),p=function(e){function t(){return Object(r.a)(this,t),Object(a.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(m.a,null),l.a.createElement(f.a,null))}}]),t}(s.PureComponent);t.default=Object(u.c)(null)(p)},575:function(e,t,n){"use strict";var r=n(98);function o(){var e=Object(r.a)(["\n  margin-bottom: 24px;\n\n  .ant-btn {\n    margin-right: 8px;\n    margin-bottom: 8px;\n  }\n"]);return o=function(){return e},e}var a=n(99).a.div(o());t.a=a},585:function(e,t,n){"use strict";var r=n(98);function o(){var e=Object(r.a)(["\n  .ant-table th {\n    white-space: nowrap;\n  }\n\n  .ant-table td {\n    white-space: nowrap;\n  }\n\n  .ant-table .table-actions a {\n    margin-right: 8px;\n  }\n"]);return o=function(){return e},e}var a=n(99).a.div(o());t.a=a},587:function(e,t,n){"use strict";var r=n(4),o=n(42),a=n(51),i=n(143),c={selectPermissionToRead:Object(r.a)([o.a.selectCurrentUser],(function(e){return new a.a(e).match(i.a.values.iamRead)})),selectPermissionToEdit:Object(r.a)([o.a.selectCurrentUser],(function(e){return new a.a(e).match(i.a.values.iamEdit)})),selectPermissionToCreate:Object(r.a)([o.a.selectCurrentUser],(function(e){return new a.a(e).match(i.a.values.iamCreate)})),selectPermissionToImport:Object(r.a)([o.a.selectCurrentUser],(function(e){return new a.a(e).match(i.a.values.iamImport)}))};t.a=c},619:function(e,t,n){"use strict";t.__esModule=!0;var r,o=n(698),a=(r=o)&&r.__esModule?r:{default:r};t.default=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return(0,a.default)(e)}},620:function(e,t,n){"use strict";var r=n(98);function o(){var e=Object(r.a)(["\n  background-color: transparent;\n  border: none;\n  cursor: pointer;\n  color: var(--link-color);\n  text-decoration: none;\n  display: inline;\n  margin: 0;\n  padding: 0;\n\n  &:hover {\n    text-decoration: none;\n  }\n  &:focus {\n    text-decoration: none;\n  }\n"]);return o=function(){return e},e}var a=n(99).a.button(o());t.a=a},656:function(e,t,n){"use strict";var r=n(4),o=Object(r.a)([function(e){return e.book.destroy}],(function(e){return!!e.loading}));t.a={selectLoading:o}},657:function(e,t,n){"use strict";var r=n(4),o=n(42),a=n(51),i=n(143),c=Object(r.a)([o.a.selectCurrentUser],(function(e){return new a.a(e).match(i.a.values.bookRead)})),s=Object(r.a)([o.a.selectCurrentUser],(function(e){return new a.a(e).match(i.a.values.bookEdit)})),l=Object(r.a)([o.a.selectCurrentUser],(function(e){return new a.a(e).match(i.a.values.bookCreate)})),u=Object(r.a)([o.a.selectCurrentUser],(function(e){return new a.a(e).match(i.a.values.bookImport)})),f={selectPermissionToRead:c,selectPermissionToEdit:s,selectPermissionToCreate:l,selectPermissionToDestroy:Object(r.a)([o.a.selectCurrentUser],(function(e){return new a.a(e).match(i.a.values.bookDestroy)})),selectPermissionToImport:u};t.a=f},671:function(e,t,n){"use strict";var r=n(0),o=n(52),a=n(215),i=n(38),c=n(140),s=n(139),l=n(101),u=n(28);function f(e){return(f="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var v=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&(n[r[o]]=e[r[o]])}return n},h=function(e){function t(e){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,i=d(t).call(this,e),(n=!i||"object"!==f(i)&&"function"!==typeof i?b(o):i).onConfirm=function(e){n.setVisible(!1,e);var t=n.props.onConfirm;t&&t.call(b(n),e)},n.onCancel=function(e){n.setVisible(!1,e);var t=n.props.onCancel;t&&t.call(b(n),e)},n.onVisibleChange=function(e){n.setVisible(e)},n.saveTooltip=function(e){n.tooltip=e},n.renderOverlay=function(e,t){var o=n.props,a=o.okButtonProps,i=o.cancelButtonProps,s=o.title,l=o.cancelText,u=o.okText,f=o.okType,p=o.icon;return r.createElement("div",null,r.createElement("div",{className:"".concat(e,"-inner-content")},r.createElement("div",{className:"".concat(e,"-message")},p,r.createElement("div",{className:"".concat(e,"-message-title")},s)),r.createElement("div",{className:"".concat(e,"-buttons")},r.createElement(c.a,m({onClick:n.onCancel,size:"small"},i),l||t.cancelText),r.createElement(c.a,m({onClick:n.onConfirm,type:f,size:"small"},a),u||t.okText))))},n.renderConfirm=function(e){var t=e.getPrefixCls,o=n.props,i=o.prefixCls,c=o.placement,u=v(o,["prefixCls","placement"]),f=t("popover",i),p=r.createElement(s.a,{componentName:"Popconfirm",defaultLocale:l.a.Popconfirm},(function(e){return n.renderOverlay(f,e)}));return r.createElement(a.a,m({},u,{prefixCls:f,placement:c,onVisibleChange:n.onVisibleChange,visible:n.state.visible,overlay:p,ref:n.saveTooltip}))},n.state={visible:e.visible},n}var n,o,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,e),n=t,i=[{key:"getDerivedStateFromProps",value:function(e){return"visible"in e?{visible:e.visible}:"defaultVisible"in e?{visible:e.defaultVisible}:null}}],(o=[{key:"getPopupDomNode",value:function(){return this.tooltip.getPopupDomNode()}},{key:"setVisible",value:function(e,t){var n=this.props;"visible"in n||this.setState({visible:e});var r=n.onVisibleChange;r&&r(e,t)}},{key:"render",value:function(){return r.createElement(u.a,null,this.renderConfirm)}}])&&p(n.prototype,o),i&&p(n,i),t}(r.Component);h.defaultProps={transitionName:"zoom-big",placement:"top",trigger:"click",okType:"primary",icon:r.createElement(i.a,{type:"exclamation-circle",theme:"filled"})},Object(o.polyfill)(h),t.a=h},698:function(e,t,n){e.exports={default:n(699),__esModule:!0}},699:function(e,t,n){n(337),n(700),e.exports=n(71).Array.from},700:function(e,t,n){"use strict";var r=n(229),o=n(105),a=n(178),i=n(701),c=n(702),s=n(336),l=n(703),u=n(704);o(o.S+o.F*!n(706)((function(e){Array.from(e)})),"Array",{from:function(e){var t,n,o,f,m=a(e),p="function"==typeof this?this:Array,d=arguments.length,b=d>1?arguments[1]:void 0,y=void 0!==b,v=0,h=u(m);if(y&&(b=r(b,d>2?arguments[2]:void 0,2)),void 0==h||p==Array&&c(h))for(n=new p(t=s(m.length));t>v;v++)l(n,v,y?b(m[v],v):m[v]);else for(f=h.call(m),n=new p;!(o=f.next()).done;v++)l(n,v,y?i(f,b,[o.value,v],!0):o.value);return n.length=v,n}})},701:function(e,t,n){var r=n(124);e.exports=function(e,t,n,o){try{return o?t(r(n)[0],n[1]):t(n)}catch(i){var a=e.return;throw void 0!==a&&r(a.call(e)),i}}},702:function(e,t,n){var r=n(177),o=n(102)("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||a[o]===e)}},703:function(e,t,n){"use strict";var r=n(85),o=n(147);e.exports=function(e,t,n){t in e?r.f(e,t,o(0,n)):e[t]=n}},704:function(e,t,n){var r=n(705),o=n(102)("iterator"),a=n(177);e.exports=n(71).getIteratorMethod=function(e){if(void 0!=e)return e[o]||e["@@iterator"]||a[r(e)]}},705:function(e,t,n){var r=n(230),o=n(102)("toStringTag"),a="Arguments"==r(function(){return arguments}());e.exports=function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(n){}}(t=Object(e),o))?n:a?r(t):"Object"==(i=r(t))&&"function"==typeof t.callee?"Arguments":i}},706:function(e,t,n){var r=n(102)("iterator"),o=!1;try{var a=[7][r]();a.return=function(){o=!0},Array.from(a,(function(){throw 2}))}catch(i){}e.exports=function(e,t){if(!t&&!o)return!1;var n=!1;try{var a=[7],c=a[r]();c.next=function(){return{done:n=!0}},a[r]=function(){return c},e(a)}catch(i){}return n}},707:function(e,t,n){"use strict";var r=n(6),o=n(7),a=n(16),i=n(15),c=n(17),s=n(0),l=n.n(s),u=n(575),f=n(140),m=n(215),p=n(671),d=n(53),b=n(657),y=n(92),v=n(83),h=n(43),g=n(93),O=n(561),j=n(5),E=n(656),T=function(e){function t(){var e,n;Object(r.a)(this,t);for(var o=arguments.length,c=new Array(o),s=0;s<o;s++)c[s]=arguments[s];return(n=Object(a.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).doExport=function(){(0,n.props.dispatch)(h.a.doExport())},n.doDestroyAllSelected=function(){(0,n.props.dispatch)(g.a.doDestroyAll(n.props.selectedKeys))},n}return Object(c.a)(t,e),Object(o.a)(t,[{key:"renderExportButton",value:function(){var e=this.props,t=e.hasRows,n=e.loading,r=e.exportLoading,o=!t||n,a=l.a.createElement(f.a,{disabled:o,icon:"file-excel",onClick:this.doExport,loading:r},Object(j.c)("common.export"));return o?l.a.createElement(m.a,{title:Object(j.c)("common.noDataToExport")},a):a}},{key:"renderDestroyButton",value:function(){var e=this,t=this.props,n=t.selectedKeys,r=t.destroyLoading,o=t.loading;if(!t.hasPermissionToDestroy)return null;var a=!n.length||o,i=l.a.createElement(f.a,{disabled:a,loading:r,type:"primary",icon:"delete"},Object(j.c)("common.destroy")),c=l.a.createElement(p.a,{title:Object(j.c)("common.areYouSure"),onConfirm:function(){return e.doDestroyAllSelected()},okText:Object(j.c)("common.yes"),cancelText:Object(j.c)("common.no")},i);return a?l.a.createElement(m.a,{title:Object(j.c)("common.mustSelectARow")},i):c}},{key:"render",value:function(){return l.a.createElement(u.a,null,this.props.hasPermissionToCreate&&l.a.createElement(O.a,{to:"/book/new"},l.a.createElement(f.a,{type:"primary",icon:"plus"},Object(j.c)("common.new"))),this.props.hasPermissionToImport&&l.a.createElement(O.a,{to:"/book/importer"},l.a.createElement(f.a,{type:"primary",icon:"upload"},Object(j.c)("common.import"))),this.renderDestroyButton(),this.props.hasPermissionToAuditLogs&&l.a.createElement(O.a,{to:"/audit-logs?entityNames=book"},l.a.createElement(f.a,{icon:"file-search"},Object(j.c)("auditLog.menu"))),this.renderExportButton())}}]),t}(s.Component);t.a=Object(d.c)((function(e){return{selectedKeys:y.a.selectSelectedKeys(e),loading:y.a.selectLoading(e),destroyLoading:E.a.selectLoading(e),exportLoading:y.a.selectExportLoading(e),hasRows:y.a.selectHasRows(e),hasPermissionToAuditLogs:v.a.selectPermissionToRead(e),hasPermissionToEdit:b.a.selectPermissionToEdit(e),hasPermissionToDestroy:b.a.selectPermissionToDestroy(e),hasPermissionToCreate:b.a.selectPermissionToCreate(e),hasPermissionToImport:b.a.selectPermissionToImport(e)}}))(T)},719:function(e,t,n){"use strict";var r=n(6),o=n(7),a=n(16),i=n(15),c=n(17),s=n(671),l=n(696),u=n(5),f=n(43),m=n(93),p=n(92),d=n(656),b=n(146),y=n(657),v=n(0),h=n.n(v),g=n(53),O=n(561),j=n(585),E=n(620),T=n(587),P=function(e){function t(){var e,n;Object(r.a)(this,t);for(var o=arguments.length,c=new Array(o),s=0;s<o;s++)c[s]=arguments[s];return(n=Object(a.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).valueAsArray=function(){var e=n.props.value;return e?Array.isArray(e)?e:[e]:[]},n.label=function(e){return e?e.fullName?"".concat(e.fullName," <").concat(e.email,">"):e.email:null},n.displayableRecord=function(e){return n.props.hasPermissionToRead?h.a.createElement("div",{key:e.id},h.a.createElement(O.a,{to:"/iam/".concat(e.id)},n.label(e))):h.a.createElement("div",{key:e.id},n.label(e))},n}return Object(c.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return this.valueAsArray().length?this.valueAsArray().map((function(t){return e.displayableRecord(t)})):null}}]),t}(v.Component),w=Object(g.c)((function(e){return{hasPermissionToRead:T.a.selectPermissionToRead(e)}}))(P),C=b.a.fields,x=function(e){function t(){var e,n;Object(r.a)(this,t);for(var o=arguments.length,c=new Array(o),l=0;l<o;l++)c[l]=arguments[l];return(n=Object(a.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).handleTableChange=function(e,t,r){(0,n.props.dispatch)(f.a.doChangePaginationAndSort(e,r))},n.doDestroy=function(e){(0,n.props.dispatch)(m.a.doDestroy(e))},n.columns=[C.bookName.forTable(),C.author.forTable(),C.subject.forTable(),C.bookOwner.forTable({render:function(e){return h.a.createElement(w,{value:e})}}),{title:"",dataIndex:"",width:"160px",render:function(e,t){return h.a.createElement("div",{className:"table-actions"},h.a.createElement(O.a,{to:"/book/".concat(t.id)},Object(u.c)("common.view")),n.props.hasPermissionToEdit&&h.a.createElement(O.a,{to:"/book/".concat(t.id,"/edit")},Object(u.c)("common.edit")),n.props.hasPermissionToDestroy&&h.a.createElement(s.a,{title:Object(u.c)("common.areYouSure"),onConfirm:function(){return n.doDestroy(t.id)},okText:Object(u.c)("common.yes"),cancelText:Object(u.c)("common.no")},h.a.createElement(E.a,null,Object(u.c)("common.destroy"))))}}],n.rowSelection=function(){return{selectedRowKeys:n.props.selectedKeys,onChange:function(e){(0,n.props.dispatch)(f.a.doChangeSelected(e))}}},n}return Object(c.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.pagination,n=e.rows,r=e.loading;return h.a.createElement(j.a,null,h.a.createElement(l.a,{rowKey:"id",loading:r,columns:this.columns,dataSource:n,pagination:t,onChange:this.handleTableChange,rowSelection:this.rowSelection(),scroll:{x:!0}}))}}]),t}(v.Component);t.a=Object(g.c)((function(e){return{loading:p.a.selectLoading(e)||d.a.selectLoading(e),rows:p.a.selectRows(e),pagination:p.a.selectPagination(e),filter:p.a.selectFilter(e),selectedKeys:p.a.selectSelectedKeys(e),hasPermissionToEdit:y.a.selectPermissionToEdit(e),hasPermissionToDestroy:y.a.selectPermissionToDestroy(e)}}))(x)}}]);